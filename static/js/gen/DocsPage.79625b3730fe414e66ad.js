!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("notations",[],e):"object"==typeof exports?exports.notations=e():(t.notations=t.notations||{},t.notations.DocsPage=e())}(this,()=>(()=>{"use strict";var t,e={2022(t,e,s){s.d(e,{$E:()=>n,HX:()=>a,LX:()=>l,M8:()=>c,Qu:()=>o,TW:()=>r,ks:()=>h,yK:()=>u});var n,i=s(7757);class o extends i.sV.bk{constructor(){super(...arguments),this.uuid=o.idCounter++,this.lastUpdatedAt=0,this.rows=[],this.rowAligns=new Map,this.colAligns=new Map}debugValue(){return{rows:this.rows.map(t=>t.debugValue()),lastUpdatedAt:this.lastUpdatedAt}}get firstRow(){for(const t of this.rows)if(t.numCells>0)return t.rowIndex;return-1}get firstCol(){let t=-1;for(const e of this.rows){const s=e.firstCol;s>=0&&(t<0||s<t)&&(t=s)}return t}cellsInRow(t){const e=[],s=this.rows[t];if(s)for(const t of s.cells)(null==t?void 0:t.value)&&e.push(t);return e}cellsInCol(t){const e=[];for(const s of this.rows){const n=s.cellAt(t);(null==n?void 0:n.value)&&e.push(n)}return e}addRowAlign(t){this.rowAligns.set(t.uuid,t)}addColAlign(t){this.colAligns.set(t.uuid,t)}addRows(t=-1,e=1){t<0&&(t=this.rows.length);let s=this.rows[t]||null;const n=this.rows[t-1]||null;for(let i=e-1;i>=0;i--){const e=new r(this,t+i);this.rows.splice(t,0,e),null!=s&&e.defaultRowAlign.addSuccessor(s.defaultRowAlign),0==i&&t>0&&n.defaultRowAlign.addSuccessor(e.defaultRowAlign),s=e}for(let s=t+e;s<this.rows.length;s++)this.rows[s].rowIndex+=e;return this}getRow(t){return t>=this.rows.length&&this.addRows(-1,1+t-this.rows.length),this.rows[t]}setValue(t,e,s,i){var o,r;const a=this.getRow(t);if(i||(i=(t,e)=>new l(t,e)),null==s){const t=a.clearCellAt(e);return null!=t&&(null===(o=this.eventHub)||void 0===o||o.emit(n.CLEARED,this,{loc:t.location})),t}{const t=a.cellAt(e,i),o=t.value;return null===(r=this.eventHub)||void 0===r||r.emit(n.UPDATED,this,{loc:t.location,cell:t,oldValue:t.value}),t.value=s,o}}eventHubChanged(){console.log("Event Hub Changed for GridModel")}}o.idCounter=0,function(t){t.ADDED="CellAdded",t.CLEARED="CellCleared",t.REMOVED="CellRemoved",t.UPDATED="CellUpdated",t.MOVED="CellMoved"}(n||(n={}));class l{constructor(t,e,s=null){this.gridRow=t,this.colIndex=e,this.value=s,this.uuid=l.idCounter++,this.rowAlign=t.defaultRowAlign}get rowAlign(){return this._rowAlign}set rowAlign(t){t.addCell(this),this._rowAlign=t}get colAlign(){return this._colAlign}set colAlign(t){t.addCell(this),this._colAlign=t}get location(){return this.gridRow.rowIndex+":"+this.colIndex}get grid(){return this.gridRow.grid}get rowIndex(){return this.gridRow.rowIndex}debugValue(){const t={r:this.gridRow.rowIndex,c:this.colIndex,value:this.value,y:this.rowAlign.coordOffset,h:this.rowAlign.maxLength};return this.colAlign&&(t.x=this.colAlign.coordOffset,t.w=this.colAlign.maxLength),t}}l.idCounter=0;class r{constructor(t,e){this.grid=t,this.rowIndex=e,this.cells=[],this.defaultRowAlign=new u,this.grid.addRowAlign(this.defaultRowAlign)}get firstCol(){var t;for(let e=0;e<this.cells.length;e++)if(null===(t=this.cells[e])||void 0===t?void 0:t.value)return e;return-1}get numCols(){return this.cells.length}get numCells(){let t=0;for(const e of this.cells)null!=e&&null!=e.value&&t++;return t}cellAt(t,e){let s=this.cells[t]||null;return!s&&e&&(this.cells[t]=s=e(this,t),s.gridRow=this,s.colIndex=t,s.rowAlign&&this.grid.addRowAlign(s.rowAlign),s.colAlign&&this.grid.addColAlign(s.colAlign)),s}clearCellAt(t){const e=this.cells[t]||null;return e&&(this.cells[t]=null),e}debugValue(){return{r:this.rowIndex,cells:this.cells.filter(t=>t).map(t=>null==t?void 0:t.debugValue())}}}class a{constructor(){this.uuid=a.idCounter++,this.needsLayout=!1,this._coordOffset=0,this._maxLength=0,this.paddingBefore=5,this.paddingAfter=5,this.cells=[],this.prevLines=[],this.nextLines=[]}get coordOffset(){return this._coordOffset}get maxLength(){return this._maxLength+this.paddingBefore+this.paddingAfter}setMaxLength(t){this._maxLength=t}setPadding(t,e){t>=0&&(this.paddingBefore=t),e>=0&&(this.paddingAfter=e)}addCell(t){return this.beforeAddingCell(t)&&this.cells.push(t),this}removeCell(t){if(this.beforeRemovingCell(t))for(let e=0;e<this.cells.length;e++)if(this.cells[e].uuid==t.uuid){this.cells.splice(e,1);break}return this}addSuccessor(t){for(const e of this.nextLines)if(e==t)return;this.nextLines.push(t),t.prevLines.push(this)}}a.idCounter=0;class c extends a{constructor(){super(...arguments),this.paddingBefore=10,this.paddingAfter=10}setOffset(t){this._coordOffset=t;for(const e of this.cells)if(e.value){const s=this.getCellView(e);this._maxLength<=0&&this.evalMaxLength(),s.setBounds(t,null,this.maxLength,null,!0)}}evalMaxLength(t=[]){this._maxLength=0;for(const t of this.cells)if(t.value){const e=this.getCellView(t);this._maxLength=Math.max(e.minSize.width,this._maxLength)}return this._maxLength}beforeAddingCell(t){return t.colAlign&&t.colAlign!=this&&t.colAlign.removeCell(t),t.colAlign!=this}beforeRemovingCell(t){return t.colAlign==this}}class u extends a{setOffset(t){this._coordOffset=t;for(const e of this.cells)if(e.value){const s=this.getCellView(e);this._maxLength<=0&&this.evalMaxLength(),s.setBounds(null,t,null,this.maxLength,!0)}}evalMaxLength(t=[]){this._maxLength=0;for(const t of this.cells)if(t.value){const e=this.getCellView(t);this._maxLength=Math.max(e.minSize.height,this._maxLength)}return this._maxLength}beforeAddingCell(t){return t.rowAlign&&t.rowAlign!=this&&t.rowAlign.removeCell(t),t.rowAlign!=this}beforeRemovingCell(t){return t.rowAlign==this}}class h{constructor(){this.gridModels=[],this.layoutChangeSubscribers=new Set,this.previousColumnWidths=new Map,this.previousRowHeights=new Map,this.eventHandler=t=>{this.applyModelEvents(t.payload)}}onLayoutChange(t){return this.layoutChangeSubscribers.add(t),()=>{this.layoutChangeSubscribers.delete(t)}}notifyLayoutChange(t){for(const e of this.layoutChangeSubscribers)try{e(t)}catch(t){console.error("Error in layout change callback:",t)}}get subscriberCount(){return this.layoutChangeSubscribers.size}addGridModel(t){var e;return null===(e=t.eventHub)||void 0===e||e.on(i.sV.o_.BATCH_EVENTS,this.eventHandler),this.gridModels.push(t),!0}startingRowAligns(){const t=[],e={};for(const s of this.gridModels)for(const n of s.cellsInRow(s.firstRow))n.rowAlign&&!e[n.rowAlign.uuid]&&(e[n.rowAlign.uuid]=!0,t.push(n.rowAlign));return t}startingColAligns(){const t=[],e={};for(const s of this.gridModels)for(const n of s.cellsInCol(s.firstCol))n.colAlign&&!e[n.colAlign.uuid]&&(e[n.colAlign.uuid]=!0,t.push(n.colAlign));return t}removeGridModel(t){var e;null===(e=t.eventHub)||void 0===e||e.removeOn(i.sV.o_.BATCH_EVENTS,this.eventHandler)}get startingRows(){return this.startingRowAligns()}get startingCols(){return this.startingColAligns()}refreshLayout(t=!0){const e={},s={};for(const t of this.startingRowAligns())t.uuid in e||(e[t.uuid]={align:t,cells:[]});for(const t of this.startingColAligns())t.uuid in s||(s[t.uuid]={align:t,cells:[]});const n=this.doBfsLayout(this.startingRows,e,this.previousRowHeights),i=this.doBfsLayout(this.startingCols,s,this.previousColumnWidths);t&&this.layoutChangeSubscribers.size>0&&this.notifyLayoutChange({affectedRowRange:null,affectedColRange:null,columnWidthsChanged:i,rowHeightsChanged:n,affectedGridModels:this.gridModels})}applyModelEvents(t){const[e,s,n]=this.changesForEvents(t),i=Object.keys(e).length>0,o=Object.keys(s).length>0,l=this.doBfsLayout(this.startingRows,e,this.previousRowHeights),r=this.doBfsLayout(this.startingCols,s,this.previousColumnWidths);if(this.layoutChangeSubscribers.size>0&&(i||o)){const t=this.calculateAffectedRowRange(e),i=this.calculateAffectedColRange(s);this.notifyLayoutChange({affectedRowRange:t,affectedColRange:i,columnWidthsChanged:r,rowHeightsChanged:l,affectedGridModels:n})}}calculateAffectedRowRange(t){let e=1/0,s=-1/0;for(const n in t){const{cells:i}=t[n];for(const t of i){const n=t.gridRow.rowIndex;e=Math.min(e,n),s=Math.max(s,n)}}return e===1/0?null:{start:e,end:s}}calculateAffectedColRange(t){let e=1/0,s=-1/0;for(const n in t){const{cells:i}=t[n];for(const t of i){const n=t.colIndex;e=Math.min(e,n),s=Math.max(s,n)}}return e===1/0?null:{start:e,end:s}}checkAndUpdateLength(t,e){const s=e.get(t.uuid),n=t.maxLength;return e.set(t.uuid,n),void 0===s||s!==n}changesForEvents(t){const e={},s={},n={},i=new Set;for(let o=t.length-1;o>=0;o--){const l=t[o],r=l.payload.loc;if(e[r])continue;e[r]=!0;const[a,c]=r.split(":").map(t=>parseInt(t)),u=l.source;i.add(u);const h=u.getRow(a).cellAt(c);h&&(h.rowAlign.uuid in s||(s[h.rowAlign.uuid]={align:h.rowAlign,cells:[]}),s[h.rowAlign.uuid].cells.push(h),h.colAlign.uuid in n||(n[h.colAlign.uuid]={align:h.colAlign,cells:[]}),n[h.colAlign.uuid].cells.push(h))}return[s,n,Array.from(i)]}ensureGetCellView(t){if(!t.getCellView){if(!this.getCellView)return null;t.getCellView=this.getCellView}return t.getCellView}doBfsLayout(t,e,s){if(!this.getCellView)return!1;let n=!1;for(const t in e){const i=e[t];this.ensureGetCellView(i.align),i.align.evalMaxLength(i.cells),s&&this.checkAndUpdateLength(i.align,s)&&(n=!0)}let i=[];const o={};for(const e of t)i.push([null,e]);const l={};for(;i.length>0;){const t=[];for(let s=0;s<i.length;s++){const[n,r]=i[s];o[r.uuid]=!0;let a=r.coordOffset,c=r.uuid in e;n&&l[n.uuid]&&(a=n.coordOffset+n.maxLength,c=!0),c&&(this.ensureGetCellView(r),r.setOffset(a),l[r.uuid]=!0);for(const e of r.nextLines)o[e.uuid]||t.push([r,e])}i=t}return n}}},4929(t,e,s){s.r(e),s.d(e,{BeatEndLines:()=>l.Fg,BeatStartLines:()=>l.Ey,BeatView:()=>o.u,Gamaka:()=>n.lD,GamakaType:()=>n.HO,GroupBracket:()=>l.cT,GroupView:()=>i.Jk,Jaaru:()=>l.e1,JaaruGamaka:()=>n.Ab,Kampitham:()=>l.RW,Kandippu:()=>l.jd,LabelEmbelishment:()=>l.Cn,LeafAtomView:()=>i.ZC,LeafAtomViewEmbelishment:()=>l.aL,LineView:()=>r.k,MarkerView:()=>o.w,Nokku:()=>l.B$,NotationView:()=>a.u,OctaveIndicator:()=>l.cq,Odukkal:()=>l.mN,Orikkai:()=>l.bM,Prathyagatham:()=>l.Cf,Raavi:()=>l.Kz,Spuritham:()=>l.uf,Vaali:()=>l.Un,createAtomView:()=>i.jx,parseEmbelishment:()=>n.b_});var n=s(5334),i=s(4760),o=s(8877),l=s(1029),r=s(4254),a=s(6278)},5410(t,e,s){s.d(e,{Hv:()=>g,PA:()=>c,SM:()=>l,St:()=>m,WH:()=>a,Zx:()=>f,eB:()=>h,eD:()=>v,oc:()=>w,oo:()=>r,sG:()=>u,sO:()=>p,vy:()=>d,xu:()=>y});var n=s(4836),i=s(9496),o=s(7048);class l{constructor(){this.name="",this.notesOnly=!1,this.index=0}}class r extends n.wC{constructor(t,e="md"){super(),this.content=t,this.contentType=e,this.TYPE="RawBlock"}debugValue(){return Object.assign(Object.assign({},super.debugValue()),{content:this.content,contentType:this.contentType})}}function a(t){return"Block"===t.TYPE}function c(t){return"Line"===t.TYPE}function u(t){return"RawBlock"===t.TYPE}class h extends n.wC{constructor(t,e=null,s=null){super(),this.TYPE="Block",this.blockItems=[],this.localCycle=null,this.localAtomsPerBeat=null,this.localBreaks=null,this.localRoles=new Map,this._parentBlock=null,this._currRoleDef=null,this._currentLine=null,this._observers=[],this._unnamedLayoutParams=[],this._namedLayoutParams=new Map,this._layoutParams=null,this.blockType=t,this.name=s,this._parentBlock=e,e&&this.setParent(e)}addObserver(t){return this._observers.push(t),()=>this.removeObserver(t)}removeObserver(t){const e=this._observers.indexOf(t);e>=0&&this._observers.splice(e,1)}children(){return this.blockItems}get parentBlock(){return this._parentBlock}get cycle(){var t,e;return null!==this.localCycle?this.localCycle:null!==(e=null===(t=this.parentBlock)||void 0===t?void 0:t.cycle)&&void 0!==e?e:null}get atomsPerBeat(){var t,e;return null!==this.localAtomsPerBeat?this.localAtomsPerBeat:null!==(e=null===(t=this.parentBlock)||void 0===t?void 0:t.atomsPerBeat)&&void 0!==e?e:1}get breaks(){var t,e;return null!==this.localBreaks?this.localBreaks:null!==(e=null===(t=this.parentBlock)||void 0===t?void 0:t.breaks)&&void 0!==e?e:[]}get unnamedLayoutParams(){return this._unnamedLayoutParams}get namedLayoutParams(){return this._namedLayoutParams}get layoutParams(){return null==this._layoutParams&&(this._layoutParams=this.findUnnamedLayoutParams(),null==this._layoutParams&&(this._layoutParams=this.snapshotLayoutParams(),this._unnamedLayoutParams.push(this._layoutParams))),this._layoutParams}resetLayoutParams(){this._layoutParams=null,this.resetLine()}snapshotLayoutParams(){const t=this.cycle;if(null==t)throw new Error("Cannot create layout params: no cycle defined");return new o.H({cycle:t,beatDuration:this.atomsPerBeat,layout:this.breaks})}findUnnamedLayoutParams(){const t=this.cycle;return null==t?null:this._unnamedLayoutParams.find(e=>e.beatDuration==this.atomsPerBeat&&t.equals(e.cycle)&&e.lineBreaksEqual(this.breaks))||null}ensureNamedLayoutParams(t){let e=this._namedLayoutParams.get(t)||null;return null!=e&&this._layoutParams==e||(null==e?(e=this.snapshotLayoutParams(),this._namedLayoutParams.set(t,e)):(this.localCycle=e.cycle,this.localAtomsPerBeat=e.beatDuration,this.localBreaks=e.lineBreaks),this._layoutParams=e,this.resetLine()),this._layoutParams}getRole(t){var e,s;return this.localRoles.get(t.toLowerCase())||(null!==(s=null===(e=this.parentBlock)||void 0===e?void 0:e.getRole(t))&&void 0!==s?s:null)}get currRoleDef(){if(null!==this._currRoleDef)return this._currRoleDef;if(this.parentBlock)return this.parentBlock.currRoleDef;const t=Array.from(this.localRoles.values());return t.length>0?t[t.length-1]:null}setCurrRole(t){if(""===(t=t.trim().toLowerCase()))throw new Error("Role name cannot be empty");let e=this.getRole(t);null==e&&(e=this.newRoleDef(t,"sw"===t)),this._currRoleDef=e}get currentLine(){return null===this._currentLine?this.newLine():this._currentLine}newLine(){return null!==this._currentLine&&this._currentLine.isEmpty&&this.removeBlockItem(this._currentLine),this._currentLine=new i.N1,this.addBlockItem(this._currentLine),this._currentLine}resetLine(){this._currentLine=null}newRoleDef(t,e=!1){if(""===(t=t.trim().toLowerCase()))throw new Error("Role name cannot be empty");if(this.localRoles.has(t))throw new Error(`Role '${t}' already exists in this block`);const s=new l;return s.name=t,s.notesOnly=e,s.index=this.localRoles.size,this.localRoles.set(t,s),s}addBlockItem(t){var e;const s=this.blockItems.length;if(t.setParent(this),this.blockItems.push(t),this._eventsEnabled)for(const n of this._observers)null===(e=n.onItemAdded)||void 0===e||e.call(n,this,t,s)}removeBlockItem(t){var e;const s=this.blockItems.indexOf(t);if(s>=0&&(this.blockItems.splice(s,1),t.setParent(null),this._eventsEnabled))for(const n of this._observers)null===(e=n.onItemRemoved)||void 0===e||e.call(n,this,t,s);return s}debugValue(){const t=Object.assign(Object.assign({},super.debugValue()),{blockType:this.blockType,blockItems:this.blockItems.map(t=>t.debugValue())});return this.name&&(t.name=this.name),this.localCycle&&(t.localCycle=this.localCycle.uuid),null!==this.localAtomsPerBeat&&(t.localAtomsPerBeat=this.localAtomsPerBeat),null!==this.localBreaks&&(t.localBreaks=this.localBreaks),this.localRoles.size>0&&(t.localRoles=Array.from(this.localRoles.keys())),t}}function d(t){let e=t.parent;for(;null!==e;){if(e instanceof h)return e;e=e.parent}return null}class g extends h{constructor(t,e=null){super("section",e,t)}children(){return[new r(`# ${this.name}`,"md"),...this.blockItems]}}class f extends h{constructor(t,e=null){super("repeat",e),this.repeatCount=t}children(){if(this.repeatCount<=0)return this.blockItems;const t=[];for(let e=0;e<this.repeatCount;e++)t.push(...this.blockItems);return t}}class p extends h{constructor(t,e=null){super("cycle",e),this.localCycle=t}}class m extends h{constructor(t,e=null){super("beatduration",e),this.localAtomsPerBeat=t}}class v extends h{constructor(t,e=null){super("breaks",e),this.localBreaks=t}}class w extends h{constructor(t,e,s=null){super("role",s),this.newRoleDef(t,e)}}class y extends h{constructor(t,e=null){super("group",e,t)}}},8481(t,e,s){var n=s(6464);class i{constructor(t,e){var s,n,i,o,l,r;this.container=t,this.config=e,this.caption="",this.isEditing=!1,this.editTextarea=null,this.sourceCodeElement=null,this.id=(t.getAttribute("id")||"").trim(),this.caption=(t.getAttribute("caption")||"").trim();const a=(t.getAttribute("sourceFrom")||"").trim();if(this.source=t.textContent||"",a.length>0){const t=document.getElementById(a);t&&(this.source=t.textContent||"")}this.height=t.getAttribute("height")||"",this.showSource="true"==(t.getAttribute("showSource")||"false");const c=t.parentNode,u=document.createElement("div");u.classList.add("notationBlockRoot"),(null===(s=e.cssClasses)||void 0===s?void 0:s.root)&&(u.className+=" "+e.cssClasses.root),this.newRoot=u;let h="";if(this.showSource){const t=this.source.split("\n"),s=(null===(n=e.cssClasses)||void 0===n?void 0:n.sourceContainer)||"",l=(null===(i=e.cssClasses)||void 0===i?void 0:i.sourceCaption)||"",r=(null===(o=e.cssClasses)||void 0===o?void 0:o.sourceCode)||"";h+=`\n        <figure class="notation-source-block ${s}">\n          <div class="notation-source-header">\n            <figcaption class="notation-caption ${l}">${this.caption}</figcaption>\n            <div class="notation-source-actions">\n              <button class="notation-btn notation-copy-btn" id="copyBtn_${this.id}" title="Copy to clipboard">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n                  <path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"/>\n                </svg>\n                <span class="notation-btn-text">Copy</span>\n              </button>\n              <button class="notation-btn notation-edit-btn" id="editBtn_${this.id}" title="Edit notation">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n                  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>\n                </svg>\n                <span class="notation-btn-text">Edit</span>\n              </button>\n            </div>\n          </div>\n          <div class="notation-source" id="notationSource_${this.id}">\n            <pre class="notation-source-pre">\n              <code class="${r}" id="sourceCode_${this.id}">${t.map(t=>`<span>${t}</span>`).join("\n")}</code>\n            </pre>\n            <textarea class="notation-edit-textarea" id="editTextarea_${this.id}" style="display: none;"></textarea>\n          </div>\n          <div class="notation-edit-actions" id="editActions_${this.id}" style="display: none;">\n            <button class="notation-btn notation-apply-btn" id="applyBtn_${this.id}">Apply</button>\n            <button class="notation-btn notation-cancel-btn" id="cancelBtn_${this.id}">Cancel</button>\n          </div>\n        </figure>`}const d=(null===(l=e.cssClasses)||void 0===l?void 0:l.outputLabel)||"",g=(null===(r=e.cssClasses)||void 0===r?void 0:r.outputContainer)||"";h+=`\n      <div class="notation-output">\n        <span class="notation-output-label ${d}"><strong>Output:</strong></span>\n        <div id="notationViewer_${this.id}" class="notation-view ${g}">\n        </div>\n      </div>`,u.innerHTML=h,c.insertBefore(u,t),c.removeChild(t);const f=u.querySelector(".notation-view");if(this.notationView=e.createViewer(f),this.showSource){this.sourceCodeElement=u.querySelector(`#sourceCode_${this.id}`),this.editTextarea=u.querySelector(`#editTextarea_${this.id}`);const t=u.querySelector(`#copyBtn_${this.id}`);t&&t.addEventListener("click",()=>this.copyToClipboard());const e=u.querySelector(`#editBtn_${this.id}`);e&&e.addEventListener("click",()=>this.toggleEditMode());const s=u.querySelector(`#applyBtn_${this.id}`);s&&s.addEventListener("click",()=>this.applyEdit());const n=u.querySelector(`#cancelBtn_${this.id}`);n&&n.addEventListener("click",()=>this.cancelEdit())}this.updatePreview(),console.log("Done Rendering... Adjusting height")}updatePreview(){const t=this.source;this.notationView.tableElement.innerHTML="";const[e,s,i,o]=(0,n.H)(t,{log:!0});i.length>0?console.log("Errors: ",i):(console.log("Rendering notation..."),this.notationView.renderNotation(e,s));const l=`Document parsed (${Math.trunc(100*o.parseTime)/100} ms) and built (${Math.trunc(100*o.buildTime)/100} ms)`;console.log(l)}get captionId(){return"notationCaption_"+this.id}copyToClipboard(){return t=this,e=void 0,n=function*(){try{yield navigator.clipboard.writeText(this.source);const t=this.newRoot.querySelector(`#copyBtn_${this.id}`);if(t){const e=t.querySelector(".notation-btn-text"),s=null==e?void 0:e.textContent;e&&(e.textContent="Copied!",setTimeout(()=>{e&&(e.textContent=s||"Copy")},2e3))}}catch(t){console.error("Failed to copy to clipboard:",t),alert("Failed to copy to clipboard")}},new((s=void 0)||(s=Promise))(function(i,o){function l(t){try{a(n.next(t))}catch(t){o(t)}}function r(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(l,r)}a((n=n.apply(t,e||[])).next())});var t,e,s,n}toggleEditMode(){this.isEditing=!this.isEditing,this.isEditing?this.enterEditMode():this.exitEditMode()}enterEditMode(){if(!this.editTextarea||!this.sourceCodeElement)return;this.editTextarea.value=this.source,this.sourceCodeElement.parentElement&&(this.sourceCodeElement.parentElement.style.display="none"),this.editTextarea.style.display="block",this.editTextarea.style.height="auto",this.editTextarea.style.height=this.editTextarea.scrollHeight+"px";const t=this.newRoot.querySelector(`#editActions_${this.id}`);t&&(t.style.display="flex");const e=this.newRoot.querySelector(`#editBtn_${this.id}`),s=null==e?void 0:e.querySelector(".notation-btn-text");s&&(s.textContent="Editing..."),this.editTextarea.focus()}exitEditMode(){if(!this.editTextarea||!this.sourceCodeElement)return;this.editTextarea.style.display="none",this.sourceCodeElement.parentElement&&(this.sourceCodeElement.parentElement.style.display="block");const t=this.newRoot.querySelector(`#editActions_${this.id}`);t&&(t.style.display="none");const e=this.newRoot.querySelector(`#editBtn_${this.id}`),s=null==e?void 0:e.querySelector(".notation-btn-text");s&&(s.textContent="Edit")}applyEdit(){if(this.editTextarea){if(this.source=this.editTextarea.value,this.sourceCodeElement){const t=this.source.split("\n");this.sourceCodeElement.innerHTML=t.map(t=>`<span>${t}</span>`).join("\n")}this.updatePreview(),this.isEditing=!1,this.exitEditMode()}}cancelEdit(){this.isEditing=!1,this.exitEditMode()}}var o=s(4929);s(2022),s(5410),s(7359);var l=s(5691);const r=s(4078);function a(t){const e=new o.NotationView(t);return e.markdownParser=function(){const t=new r({html:!0});return e=>{const s=t.parse(e.trim(),{});return t.renderer.render(s,{langPrefix:"v4_"})}}(),e}s(8600),window.N=l;class c{constructor(){this.notations=[];const t={createViewer:a,cssClasses:{sourceContainer:"",sourceCaption:"",sourceCode:"",outputContainer:""}},e={};let s=1;const n=document.querySelectorAll("notation");for(const o of n){let n=(o.getAttribute("id")||"").trim();if(0==n.length)for(;n="notation_"+s++,e[n];);o.setAttribute("id",n);const l=new i(o,t);this.notations.push(l),console.log("Source: ",n,o.textContent)}}}document.addEventListener("DOMContentLoaded",function(){window.docsPage=new c})}},s={};function n(t){var i=s[t];if(void 0!==i)return i.exports;var o=s[t]={id:t,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,s,i,o)=>{if(!s){var l=1/0;for(u=0;u<t.length;u++){for(var[s,i,o]=t[u],r=!0,a=0;a<s.length;a++)(!1&o||l>=o)&&Object.keys(n.O).every(t=>n.O[t](s[a]))?s.splice(a--,1):(r=!1,o<l&&(l=o));if(r){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,i,o]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={251:0,747:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var i,o,[l,r,a]=s,c=0;if(l.some(e=>0!==t[e])){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(a)var u=a(n)}for(e&&e(s);c<l.length;c++)o=l[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},s=this.webpackChunknotations=this.webpackChunknotations||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.nc=void 0;var i=n.O(void 0,[995,446,359,126],()=>n(8481));return n.O(i)})());
//# sourceMappingURL=DocsPage.79625b3730fe414e66ad.js.map