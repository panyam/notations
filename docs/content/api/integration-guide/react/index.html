---
title: "React Integration"
description: "Using the Notations library in React applications"
---

<p>This guide shows how to create React components for rendering Carnatic music notation.</p>

<h2>Installation</h2>

<pre><code>npm install notations</code></pre>

<h2>Basic NotationViewer Component</h2>

<p>Create a reusable React component for notation rendering:</p>

<div class="tabbed-example">
  <div class="tabbed-example-caption">Basic NotationViewer Component</div>
  <div class="tabbed-example-header">
    <button class="tab-btn active" data-tab="react-basic-source">Source</button>
    <button class="tab-btn" data-tab="react-basic-output">Output</button>
  </div>
  <div id="react-basic-source" class="tab-content active">
<pre><code>// NotationViewer.jsx
import React, { useEffect, useRef } from 'react';
import * as N from 'notations';

function NotationViewer({ source, className }) {
  const containerRef = useRef(null);
  const viewRef = useRef(null);

  useEffect(() =&gt; {
    if (!containerRef.current) return;

    // Create table element for notation
    if (!viewRef.current) {
      const table = document.createElement('table');
      table.classList.add('notation-table');
      containerRef.current.appendChild(table);
      viewRef.current = new N.Carnatic.NotationView(table);
    }

    // Parse and render notation
    const [notation, beatLayout, errors] = N.load(source);

    if (errors.length === 0) {
      viewRef.current.renderNotation(notation, beatLayout);
    } else {
      console.error('Notation errors:', errors);
    }
  }, [source]);

  return &lt;div ref={containerRef} className={className} /&gt;;
}

// Usage
function App() {
  const notation = `
\\cycle("|4|2|2|")
Sw: S R G M P D N S.
Sh: sa ri ga ma pa dha ni sa
  `;

  return (
    &lt;div&gt;
      &lt;h3&gt;My Composition&lt;/h3&gt;
      &lt;NotationViewer source={notation} className="my-notation" /&gt;
    &lt;/div&gt;
  );
}</code></pre>
  </div>
  <div id="react-basic-output" class="tab-content">
    <notation caption="React Component Output">
\cycle("|4|2|2|")
Sw: S R G M P D N S.
Sh: sa ri ga ma pa dha ni sa
    </notation>
  </div>
</div>

<h2>Component with Source Display and Editing</h2>

<p>A more complete component that shows source code and allows editing:</p>

<div class="tabbed-example">
  <div class="tabbed-example-caption">Editable NotationBlock Component</div>
  <div class="tabbed-example-header">
    <button class="tab-btn active" data-tab="react-edit-source">Source</button>
    <button class="tab-btn" data-tab="react-edit-output">Output</button>
  </div>
  <div id="react-edit-source" class="tab-content active">
<pre><code>// NotationBlock.jsx
import React, { useState, useEffect, useRef } from 'react';
import * as N from 'notations';

function NotationBlock({ source, caption, showSource = false }) {
  const containerRef = useRef(null);
  const viewRef = useRef(null);
  const [isEditing, setIsEditing] = useState(false);
  const [editedSource, setEditedSource] = useState(source);
  const [currentSource, setCurrentSource] = useState(source);

  useEffect(() =&gt; {
    if (!containerRef.current) return;

    if (!viewRef.current) {
      const table = document.createElement('table');
      table.classList.add('notation-table');
      containerRef.current.appendChild(table);
      viewRef.current = new N.Carnatic.NotationView(table);
    }

    const [notation, beatLayout, errors] = N.load(currentSource);

    if (errors.length === 0) {
      viewRef.current.tableElement.innerHTML = '';
      viewRef.current.renderNotation(notation, beatLayout);
    }
  }, [currentSource]);

  const handleApply = () =&gt; {
    setCurrentSource(editedSource);
    setIsEditing(false);
  };

  return (
    &lt;div className="notation-block"&gt;
      {caption &amp;&amp; &lt;div className="notation-caption"&gt;{caption}&lt;/div&gt;}
      {showSource &amp;&amp; (
        &lt;div className="notation-source"&gt;
          {isEditing ? (
            &lt;&gt;
              &lt;textarea
                value={editedSource}
                onChange={(e) =&gt; setEditedSource(e.target.value)}
              /&gt;
              &lt;button onClick={handleApply}&gt;Apply&lt;/button&gt;
              &lt;button onClick={() =&gt; setIsEditing(false)}&gt;Cancel&lt;/button&gt;
            &lt;/&gt;
          ) : (
            &lt;&gt;
              &lt;pre&gt;&lt;code&gt;{currentSource}&lt;/code&gt;&lt;/pre&gt;
              &lt;button onClick={() =&gt; setIsEditing(true)}&gt;Edit&lt;/button&gt;
            &lt;/&gt;
          )}
        &lt;/div&gt;
      )}
      &lt;div ref={containerRef} /&gt;
    &lt;/div&gt;
  );
}</code></pre>
  </div>
  <div id="react-edit-output" class="tab-content">
    <notation showSource="true" caption="Ninnu Kori Varnam">
\cycle("|4|2|2|")
\beatDuration(4)
\line("Pallavi")
Sw: S , R , G , M , P , D , N , S. ,
Sh: ni , nnu , ko , ri , va , ra , nam , ma ,
    </notation>
  </div>
</div>

<h2>TypeScript Version</h2>

<pre><code>// NotationViewer.tsx
import React, { useEffect, useRef } from 'react';
import * as N from 'notations';

interface NotationViewerProps {
  source: string;
  className?: string;
  onError?: (errors: N.ParseError[]) =&gt; void;
}

const NotationViewer: React.FC&lt;NotationViewerProps&gt; = ({
  source,
  className,
  onError
}) =&gt; {
  const containerRef = useRef&lt;HTMLDivElement&gt;(null);
  const viewRef = useRef&lt;N.Carnatic.NotationView | null&gt;(null);

  useEffect(() =&gt; {
    if (!containerRef.current) return;

    if (!viewRef.current) {
      const table = document.createElement('table');
      table.classList.add('notation-table');
      containerRef.current.appendChild(table);
      viewRef.current = new N.Carnatic.NotationView(table);
    }

    const [notation, beatLayout, errors] = N.load(source);

    if (errors.length === 0) {
      viewRef.current.tableElement.innerHTML = '';
      viewRef.current.renderNotation(notation, beatLayout);
    } else if (onError) {
      onError(errors);
    }
  }, [source, onError]);

  return &lt;div ref={containerRef} className={className} /&gt;;
};

export default NotationViewer;</code></pre>

<h2>Error Handling</h2>

<pre><code>function NotationWithErrors({ source }) {
  const [errors, setErrors] = useState([]);

  return (
    &lt;div&gt;
      &lt;NotationViewer
        source={source}
        onError={setErrors}
      /&gt;
      {errors.length &gt; 0 &amp;&amp; (
        &lt;div className="error-display"&gt;
          &lt;h4&gt;Parsing Errors:&lt;/h4&gt;
          &lt;ul&gt;
            {errors.map((err, i) =&gt; (
              &lt;li key={i}&gt;
                Line {err.line}, Col {err.column}: {err.message}
              &lt;/li&gt;
            ))}
          &lt;/ul&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>

<h2>CSS for React Components</h2>

<pre><code>/* NotationViewer.css */
.notation-block {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  margin: 1rem 0;
  overflow: hidden;
}

.notation-source {
  background: #f3f4f6;
  padding: 1rem;
  border-bottom: 1px solid #e5e7eb;
}

.notation-caption {
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.notation-textarea {
  width: 100%;
  min-height: 150px;
  font-family: monospace;
  padding: 0.5rem;
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

.notation-actions {
  margin-top: 0.5rem;
  display: flex;
  gap: 0.5rem;
}

.notation-output {
  padding: 1rem;
}

.error-display {
  background: #fef2f2;
  border: 1px solid #fecaca;
  padding: 1rem;
  border-radius: 4px;
  margin-top: 0.5rem;
}

.error-display h4 {
  color: #dc2626;
  margin: 0 0 0.5rem 0;
}</code></pre>

<h2>See Also</h2>

<ul>
  <li><a href="{{.Site.PathPrefix}}/api/integration-guide/">Integration Guide Overview</a></li>
  <li><a href="{{.Site.PathPrefix}}/api/integration-guide/web-components/">Web Components</a></li>
  <li><a href="{{.Site.PathPrefix}}/api/integration-guide/vue/">Vue Integration</a></li>
</ul>
